function J(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in e)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(e,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H={exports:{}},a={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),re=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),k=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Y={};function S(e,t,r){this.props=e,this.context=t,this.refs=Y,this.updater=r||L}S.prototype.isReactComponent={};S.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function W(){}W.prototype=S.prototype;function A(e,t,r){this.props=e,this.context=t,this.refs=Y,this.updater=r||L}var N=A.prototype=new W;N.constructor=A;$(N,S.prototype);N.isPureReactComponent=!0;var x=Array.isArray;function C(){}var l={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function w(e,t,r){var i=r.ref;return{$$typeof:b,type:e,key:t,ref:i!==void 0?i:null,props:r}}function oe(e,t){return w(e.type,t,e.props)}function P(e){return typeof e=="object"&&e!==null&&e.$$typeof===b}function ae(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var D=/\/+/g;function R(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ae(""+e.key):t.toString(36)}function ue(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(C,C):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function _(e,t,r,i,o){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(u){case"bigint":case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case b:case Q:f=!0;break;case U:return f=e._init,_(f(e._payload),t,r,i,o)}}if(f)return o=o(e),f=i===""?"."+R(e,0):i,x(o)?(r="",f!=null&&(r=f.replace(D,"$&/")+"/"),_(o,t,r,"",function(c){return c})):o!=null&&(P(o)&&(o=oe(o,r+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(D,"$&/")+"/")+f)),t.push(o)),1;f=0;var n=i===""?".":i+":";if(x(e))for(var s=0;s<e.length;s++)i=e[s],u=n+R(i,s),f+=_(i,t,r,u,o);else if(s=ie(e),typeof s=="function")for(e=s.call(e),s=0;!(i=e.next()).done;)i=i.value,u=n+R(i,s++),f+=_(i,t,r,u,o);else if(u==="object"){if(typeof e.then=="function")return _(ue(e),t,r,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return f}function T(e,t,r){if(e==null)return e;var i=[],o=0;return _(e,i,"","",function(u){return t.call(r,u,o++)}),i}function ce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var j=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fe={map:T,forEach:function(e,t,r){T(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(t){return t})||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};a.Activity=se;a.Children=fe;a.Component=S;a.Fragment=F;a.Profiler=Z;a.PureComponent=A;a.StrictMode=X;a.Suspense=ne;a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l;a.__COMPILER_RUNTIME={__proto__:null,c:function(e){return l.H.useMemoCache(e)}};a.cache=function(e){return function(){return e.apply(null,arguments)}};a.cacheSignal=function(){return null};a.cloneElement=function(e,t,r){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=$({},e.props),o=e.key;if(t!=null)for(u in t.key!==void 0&&(o=""+t.key),t)!K.call(t,u)||u==="key"||u==="__self"||u==="__source"||u==="ref"&&t.ref===void 0||(i[u]=t[u]);var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){for(var f=Array(u),n=0;n<u;n++)f[n]=arguments[n+2];i.children=f}return w(e.type,o,i)};a.createContext=function(e){return e={$$typeof:ee,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:V,_context:e},e};a.createElement=function(e,t,r){var i,o={},u=null;if(t!=null)for(i in t.key!==void 0&&(u=""+t.key),t)K.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var f=arguments.length-2;if(f===1)o.children=r;else if(1<f){for(var n=Array(f),s=0;s<f;s++)n[s]=arguments[s+2];o.children=n}if(e&&e.defaultProps)for(i in f=e.defaultProps,f)o[i]===void 0&&(o[i]=f[i]);return w(e,u,o)};a.createRef=function(){return{current:null}};a.forwardRef=function(e){return{$$typeof:te,render:e}};a.isValidElement=P;a.lazy=function(e){return{$$typeof:U,_payload:{_status:-1,_result:e},_init:ce}};a.memo=function(e,t){return{$$typeof:re,type:e,compare:t===void 0?null:t}};a.startTransition=function(e){var t=l.T,r={};l.T=r;try{var i=e(),o=l.S;o!==null&&o(r,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(C,j)}catch(u){j(u)}finally{t!==null&&r.types!==null&&(t.types=r.types),l.T=t}};a.unstable_useCacheRefresh=function(){return l.H.useCacheRefresh()};a.use=function(e){return l.H.use(e)};a.useActionState=function(e,t,r){return l.H.useActionState(e,t,r)};a.useCallback=function(e,t){return l.H.useCallback(e,t)};a.useContext=function(e){return l.H.useContext(e)};a.useDebugValue=function(){};a.useDeferredValue=function(e,t){return l.H.useDeferredValue(e,t)};a.useEffect=function(e,t){return l.H.useEffect(e,t)};a.useEffectEvent=function(e){return l.H.useEffectEvent(e)};a.useId=function(){return l.H.useId()};a.useImperativeHandle=function(e,t,r){return l.H.useImperativeHandle(e,t,r)};a.useInsertionEffect=function(e,t){return l.H.useInsertionEffect(e,t)};a.useLayoutEffect=function(e,t){return l.H.useLayoutEffect(e,t)};a.useMemo=function(e,t){return l.H.useMemo(e,t)};a.useOptimistic=function(e,t){return l.H.useOptimistic(e,t)};a.useReducer=function(e,t,r){return l.H.useReducer(e,t,r)};a.useRef=function(e){return l.H.useRef(e)};a.useState=function(e){return l.H.useState(e)};a.useSyncExternalStore=function(e,t,r){return l.H.useSyncExternalStore(e,t,r)};a.useTransition=function(){return l.H.useTransition()};a.version="19.2.1";H.exports=a;var M=H.exports;const le=I(M),ve=J({__proto__:null,default:le},[M]);var z={exports:{}},g={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me=M;function B(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var h={d:{f:v,r:function(){throw Error(B(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},de=Symbol.for("react.portal");function pe(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}var E=me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function O(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}g.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h;g.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(B(299));return pe(e,t,null,r)};g.flushSync=function(e){var t=E.T,r=h.p;try{if(E.T=null,h.p=2,e)return e()}finally{E.T=t,h.p=r,h.d.f()}};g.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,h.d.C(e,t))};g.prefetchDNS=function(e){typeof e=="string"&&h.d.D(e)};g.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var r=t.as,i=O(r,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,u=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;r==="style"?h.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:u}):r==="script"&&h.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:u,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};g.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var r=O(t.as,t.crossOrigin);h.d.M(e,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&h.d.M(e)};g.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var r=t.as,i=O(r,t.crossOrigin);h.d.L(e,r,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};g.preloadModule=function(e,t){if(typeof e=="string")if(t){var r=O(t.as,t.crossOrigin);h.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else h.d.m(e)};g.requestFormReset=function(e){h.d.r(e)};g.unstable_batchedUpdates=function(e,t){return e(t)};g.useFormState=function(e,t,r){return E.H.useFormState(e,t,r)};g.useFormStatus=function(){return E.H.useHostTransitionStatus()};g.version="19.2.1";function G(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G)}catch(e){console.error(e)}}G(),z.exports=g;var he=z.exports;const ye=I(he);var q={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r,i,o={d:(n,s)=>{for(var c in s)o.o(s,c)&&!o.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:s[c]})},o:(n,s)=>Object.prototype.hasOwnProperty.call(n,s)},u={};o.d(u,{default:()=>f}),function(n){n.StreamContextItem="stream-context-item",n.SaveItems="save-items",n.ComponentRegistered="component-registered",n.ActivateThemes="themes",n.ThemesActivated="themes-activated",n.SetComponentData="set-component-data"}(r||(r={})),function(n){n.Component="component"}(i||(i={}));const f=new class{constructor(){this.component={activeThemes:[],acceptsThemes:!0},this.sentMessages=[],this.messageQueue=[],this.subscriptions=[],this.generateNotePreview=!0}initialize(n={}){if(this.contentWindow)throw"Cannot initialize mediator more than once";this.contentWindow=window,this.coallesedSavingDelay=n.debounceSave!==void 0?n.debounceSave:250,this.registerMessageHandler(),this.postMessage(r.StreamContextItem,{},s=>{const{item:c}=s;(!this.lastStreamedItem||this.lastStreamedItem.uuid!==c.uuid)&&this.pendingSaveTimeout&&(clearTimeout(this.pendingSaveTimeout),this.performSavingOfItems(this.pendingSaveParams),this.pendingSaveTimeout=void 0,this.pendingSaveParams=void 0),this.lastStreamedItem=c,this.lastStreamedItem.isMetadataUpdate||this.subscriptions.forEach(m=>{m(this.text,this.meta)})})}subscribe(n){return this.subscriptions.push(n),this.lastStreamedItem&&setTimeout(()=>{n(this.text,this.meta)}),()=>{const s=this.subscriptions.indexOf(n);s>=0&&this.subscriptions.splice(s,1)}}get text(){var n,s;return this.checkNoteExists(),((s=(n=this.lastStreamedItem)===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.text)||""}get meta(){var n;return this.checkNoteExists(),!((n=this.lastStreamedItem)===null||n===void 0)&&n.content?this.lastStreamedItem.content.appData[this.lastStreamedItem.content.editorIdentifier]:{}}get extensionMeta(){return this.component.data}get locked(){var n,s;return this.checkNoteExists(),(s=(n=this.lastStreamedItem)===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.appData["org.standardnotes.sn"].locked}get preview(){var n,s;return this.checkNoteExists(),(s=(n=this.lastStreamedItem)===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.preview_plain}set text(n){this.checkNoteExists(),this.lastStreamedItem.content.text=n,this.saveNote(this.lastStreamedItem)}set preview(n){this.checkNoteExists(),this.generateNotePreview=!1,this.lastStreamedItem.content.preview_plain=n}set meta(n){this.checkNoteExists(),this.lastStreamedItem.content.appData[this.lastStreamedItem.content.editorIdentifier]=n,this.saveNote(this.lastStreamedItem)}set extensionMeta(n){this.component.data=n,this.postMessage(r.SetComponentData,{componentData:n})}registerMessageHandler(){this.messageHandler=n=>{const{data:s}=n,c=(m=>{if(typeof m!="string")return!1;try{const d=JSON.parse(m),p=Object.prototype.toString.call(d);return p==="[object Object]"||p==="[object Array]"}catch{return!1}})(s)?JSON.parse(s):s;c&&this.handleMessage(c)},this.contentWindow.document.addEventListener("message",this.messageHandler,!1),this.contentWindow.addEventListener("message",this.messageHandler,!1)}handleMessage(n){var s,c;switch(n.action){case r.ComponentRegistered:this.component.sessionKey=n.sessionKey,n.componentData&&(this.component.data=n.componentData),this.onReady(n.data);break;case r.ActivateThemes:this.activateThemes(n.data.themes);break;default:{if(!n.original)return;const m=(s=this.sentMessages)===null||s===void 0?void 0:s.filter(d=>{var p;return d.messageId===((p=n.original)===null||p===void 0?void 0:p.messageId)})[0];if(!m)return;(c=m==null?void 0:m.callback)===null||c===void 0||c.call(m,n.data);break}}}onReady(n){this.component.environment=n.environment,this.component.platform=n.platform,this.component.uuid=n.uuid;for(const s of this.messageQueue)this.postMessage(s.action,s.data,s.callback);this.messageQueue=[],this.activateThemes(n.activeThemeUrls||[]),this.postMessage(r.ThemesActivated,{})}get isRunningInDesktopApplication(){return this.component.environment==="desktop"}get isRunningInMobileApplication(){return this.component.environment==="mobile"}get isRunningInBrowser(){return this.component.environment==="web"}postMessage(n,s,c){if(!this.component.sessionKey)return void this.messageQueue.push({action:n,data:s,api:i.Component,callback:c});const m={action:n,data:s,messageId:this.generateUUID(),sessionKey:this.component.sessionKey,api:i.Component},d=JSON.parse(JSON.stringify(m));let p;d.callback=c,this.sentMessages.push(d),p=this.isRunningInMobileApplication?JSON.stringify(m):m,this.contentWindow.parent.postMessage(p,"*")}activateThemes(n=[]){if(!this.component.acceptsThemes)return;const{activeThemes:s}=this.component;if(s&&s.sort().toString()==n.sort().toString())return;let c=n;const m=[];for(const d of s)n.includes(d)?c=c.filter(p=>p!==d):m.push(d);for(const d of m)this.deactivateTheme(d);this.component.activeThemes=n;for(const d of c){if(!d)continue;const p=d.endsWith("/org.standardnotes.theme-focus/index.css")?"https://app.standardnotes.com/components/assets/org.standardnotes.theme-focus/index.css":d,y=this.contentWindow.document.createElement("link");y.id=btoa(d),y.href=p,y.type="text/css",y.rel="stylesheet",y.media="screen,print",y.className="custom-theme",this.contentWindow.document.getElementsByTagName("head")[0].appendChild(y)}this.onThemesChangeCallback&&this.onThemesChangeCallback()}themeElementForUrl(n){return Array.from(this.contentWindow.document.getElementsByClassName("custom-theme")).slice().find(s=>s.id==btoa(n))}deactivateTheme(n){const s=this.themeElementForUrl(n);s&&s.parentNode&&(s.setAttribute("disabled","true"),s.parentNode.removeChild(s))}generateUUID(){return crypto.randomUUID()}get platform(){return this.component.platform}get environment(){return this.component.environment}performSavingOfItems({items:n,callback:s}){this.generateNotePreview&&(n[0].content.preview_plain=((m,d=50)=>m.length<=d?m:m.substring(0,d)+"...")(n[0].content.text));const c=[];for(const m of n)c.push(this.jsonObjectForItem(m));this.postMessage(r.SaveItems,{items:c},()=>{s==null||s()})}saveNote(n,s){const c=[n];if(this.pendingSaveItems||(this.pendingSaveItems=[]),this.coallesedSavingDelay){this.pendingSaveTimeout&&clearTimeout(this.pendingSaveTimeout);const m=c.map(p=>p.uuid),d=this.pendingSaveItems.filter(p=>!m.includes(p.uuid));this.pendingSaveItems=d.concat(c),this.pendingSaveParams={items:this.pendingSaveItems,callback:s},this.pendingSaveTimeout=setTimeout(()=>{this.performSavingOfItems(this.pendingSaveParams),this.pendingSaveItems=[],this.pendingSaveTimeout=void 0,this.pendingSaveParams=null},this.coallesedSavingDelay)}else this.performSavingOfItems({items:c,callback:s})}jsonObjectForItem(n){const s=Object.assign({},n);return s.children=null,s.parent=null,s}checkNoteExists(){if(!this.lastStreamedItem)throw"Trying to interact with note before it is received from Standard Notes. Use subscribe function."}};return u.default})())})(q);var ge=q.exports;const _e=I(ge);export{ye as N,le as R,he as a,ve as k,M as r,_e as s};
